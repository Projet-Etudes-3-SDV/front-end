<ion-content class="ion-padding">
  <ion-toolbar>
    <ion-title>
      <div class="w-full flex items-center gap-2 mt-2 rounded-lg">
        <ion-icon name="cart" class="color-theme-title text-xl"></ion-icon>
        <h3 class="text-xl font-bold text-black/80">Mon Panier</h3>
      </div>
    </ion-title>
    <ion-buttons slot="end">
      <ion-button (click)="closeModal()">
        <ion-icon name="close"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
  <div [class]="isDesktop ? 'm-16' : ''">
    <div *ngIf="cartItems.length > 0; else emptyCart">
      <ion-list>
        <ion-item *ngFor="let item of cartItems">
          <ion-label>
            <h2>{{ item.product.name }}</h2>
            <p>Quantit√©: {{ item.quantity }}</p>
            <p>Prix: {{ item.product?.plan === "monthly" ? item.product.monthlyPrice : item.product.yearlyPrice | currency: 'EUR': 'symbol' }}</p>
            <p>Plan: {{ item.product?.plan === "monthly" ? "Mensuel" : "Annuel" }}</p>
          </ion-label>
          <ion-button fill="clear" color="danger" (click)="removeFromCart(item.product.id)">
            <ion-icon class="text-2xl" name="close-outline"></ion-icon>
          </ion-button>
        </ion-item>
      </ion-list>
      <ion-button expand="full" color="danger" (click)="resetCart()">
          <ion-icon class="mr-2" name="trash"></ion-icon>
          Vider le panier
      </ion-button>
      <ion-button expand="full" color="success" (click)="validateCart()">Valider le panier</ion-button>
    </div>

    <ng-template #emptyCart>
      <p class="text-center p-6 bg-theme-main">Votre panier est vide.</p>
    </ng-template>
  </div>
</ion-content>
